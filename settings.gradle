// Copyright DataStax, Inc.
// Please see the included license file for details.

rootProject.name = 'cass-config-builder'

/*
The credentials are provided typically in 'gradle.properties' in the project root.
If needed, the repo location and the credentials could be changed.
Place the values in 'gradle.properties' or pass them via the command line with -P switches.
*/

def propertyExists(name) {
println name
    if (System.getenv(name) != null) {
println "exists"
        return true
    }
println "does not exist"
    settings.hasProperty(name) || System.properties[(name)] != null
}
def propertiesExist(names) {
    names.every { propertyExists(it)}
}
def propertyValue(name) {
println name
    if (System.getenv(name) != null) {
println "value found"
        return System.getenv(name)
    }
println "value not found"
    settings.hasProperty(name) ? settings.getProperty(name) : System.properties[(name)]
}

println "path"
println System.getenv("PATH")

println "before properties"
if (propertiesExist(['mavenRepositoryUsername', 'mavenRepositoryPassword'])) {
println "properties found"
    def repoUrl = propertyValue('mavenRepositoryUrl')
    def repoUsername = propertyValue('mavenRepositoryUsername')
    def repoPassword = propertyValue('mavenRepositoryPassword')

    gradle.beforeProject { proj ->
        proj.ext.repoUrl = repoUrl
        proj.ext.repoUsername = repoUsername
        proj.ext.repoPassword = repoPassword
    }
}

println "after properties"
